# Voxel/Low-Poly Globe Busy Indicator — Pure Scene & Animation Spec (Cel-Shaded, No Borders)

## 1) Coordinate system & scale

* Right-handed world.
* Axes: X right, Y up, Z toward camera negative.
* Scene origin `(0, 0, 0)` is the **globe centre** and **all orbital pivots** reference this point.
* Base unit: metres (arbitrary).
* Globe radius `R = 1.0`. Atmosphere/traffic lives between `1.05R` and `1.35R`.

## 2) Camera (static, cinematic)

* Position: `C = (0.0, 0.85, 3.2)`.
* LookAt: `L = (0.0, 0.15, 0.0)` (slight up-tilt to show water + land).
* Up vector: `(0, 1, 0)`.
* FOV (vertical): `30°`.
* Clipping: near `0.05`, far `100`.
* Exposure: neutral; no post; no outlines.
* Frame composition: globe centred; aircraft orbit crosses front upper quadrant, readable silhouette at all times.

## 3) Lighting & shadows

* Single **directional sun** (infinitely far).
* Direction (from sun to origin): `S_dir = normalize(-0.55, 0.72, 0.41)`; warm white.
* Cel shading **without borders**: implement as stepped N.L with 3–4 bands (e.g., 0.0–0.33–0.66–1.0).
* No shadow maps required; if used, 1 cascaded split is enough. Otherwise fake contact darkening on night side of globe via banding.
* Result: hard, modern banded light; one hemisphere bright, opposite in clean shadow.

## 4) Materials & six 32×32 textures (random per run)

* All meshes use **flat colours + tiny 32×32** textures with mild noise, regenerated each start.
* T0 Water: blue base with slight per-pixel noise.
* T1 Land/Grass: green base with mild value jitter.
* T2 Ground/Rock: brown/grey speckle.
* T3 Clouds: off-white with faint dithering.
* T4 Aircraft Fuselage: saturated red with micro variance.
* T5 Aircraft Wings/Tail: neutral grey with micro variance.
* UVs are simple box/sphere projections; no detail maps; no normal maps; alpha used only for cloud fade (optional, can do vertex fade).

## 5) Objects

### 5.1 Globe

* Geometry: low-poly icosphere or cubesphere, \~300–500 tris.
* Radius: `R = 1.0`.
* Water: base sphere using T0.
* Land: raised “voxel-like” patches (0.03–0.06R height) using T1/T2; non-literal continents, just suggestive clumps.
* Rotation axis: world Y.
* Rotation: `ω_globe = 6°/s` (one full spin \~60 s), constant.

### 5.2 Atmosphere ring (invisible helper)

* A non-rendered band used as a spawn guide for clouds and aircraft orbits.
* Inner radius `1.10R`, outer `1.35R`.
* Clouds/planes sample their orbital radii inside this band.

### 5.3 Low-poly aircraft (main)

* Geometry: \~80–120 tris, clear silhouette (fuselage, wings, tail).
* Materials: fuselage T4 (red), wings/tail T5 (grey).
* Scale: fuselage length ≈ `0.25R`.
* Pivot: aircraft local origin at its **centre of mass**.
* Orbit plane: inclined ellipse for depth parallax.

  * Base circular radius `r_plane = 1.25R`.
  * Inclination `i = 18°` relative to globe equator (tilt about X).
  * Eccentricity `e = 0.08` (slight oval to vary speed perspective).
* Orientation: nose aligned to instantaneous velocity; gentle banking in curves.
* Contrail (optional): 6–10 tiny cubes at `r ≈ 0.02R`, lifetime `0.8 s`, exponential alpha fade.

### 5.4 Cloud groups (voxel clusters)

* Each group: 5–15 cubes (side `0.06R`…`0.10R`) using T3.
* Groups live on orbital shells `r_cloud ∈ [1.12R, 1.30R]`.
* Every group has a shared pivot at the **origin**; they **orbit** like satellites to read as “circling weather.”
* Each cube inside a group has a small local offset jitter `(±0.06R)` to avoid perfect spheres.

## 6) Animation & timing

### 6.1 Global timeline

* Time `t` in seconds, looping seamlessly.

### 6.2 Globe spin

* Y-axis rotation: `θ_globe(t) = θ0 + ω_globe * t`, `ω_globe = 6°/s`.

### 6.3 Aircraft orbit

* Parametric ellipse in an inclined plane:

  * Angular rate `ω_plane = 60°/s` (period `T_plane = 6 s` for a lively “busy” feel).
  * Base circle radius `r_plane = 1.25R`; minor axis `b = r_plane * (1 − e)`, `e = 0.08`.
  * Local ellipse coordinates:

    * `x’ = r_plane * cos(ω_plane * t)`
    * `z’ = b * sin(ω_plane * t)`
  * Apply inclination about X: rotate by `i = 18°` to world.
* Position: `P_plane(t) = RotX(i) * (x’, 0, z’)`.
* Heading (nose direction): tangent of path, normalized; bank angle `β = clamp(dyaw/dt * 0.5, -15°, 15°)`.
* Optional ease: tiny sinusoidal speed modulation `±5%` to avoid mechanical pacing.

### 6.4 Cloud group orbits (appear to orbit)

* N active groups: `N ∈ [3, 6]`.
* Each group `k` samples:

  * Radius `r_k ∈ [1.12R, 1.30R]`.
  * Inclination `i_k ∈ [−25°, +25°]`.
  * Angular rate `ω_k ∈ [20°/s, 40°/s]` (independent of plane).
  * Direction: 70% prograde (same as aircraft), 30% retrograde for visual variety.
* Group centre path (circle for simplicity):

  * `xk’ = r_k * cos(ω_k * t + φ_k)`
  * `zk’ = r_k * sin(ω_k * t + φ_k)`
  * `Pk(t) = RotX(i_k) * (xk’, 0, zk’)`.
* Within each group, cubes orbit the group centre with tiny offsets `o_j` that slowly **precess** (0.1–0.3 Hz) for gentle internal motion.

### 6.5 Cloud lifecycle (vapourisation feel)

* Spawn cadence: every `Δ_spawn ≈ 0.8–1.5 s`, try to keep target population `N`.
* Lifetime per group `τ ∈ [3.5 s, 7 s]`.
* Fade in `0.35 s` (alpha or vertex intensity), hold random `2–5 s`, fade out `0.35 s`.
* On death, immediately schedule a replacement with new `(r_k, i_k, ω_k, φ_k)`.
* Ensure at least one group is always visible to avoid dead frames.

## 7) Points of rotation (clarity)

* **Primary pivot**: world origin `(0,0,0)` — everything that “orbits” rotates around this point.
* Globe rotates about **its** Y axis through the origin.
* Aircraft: transforms = `OrbitAroundOrigin ∘ LocalBank/NoseAlign`.
* Cloud groups: transforms = `OrbitAroundOrigin ∘ LocalJitter`.
* Contrail particles (if enabled): parented to aircraft initially, then world-space once emitted.

## 8) Performance & memory discipline (\~1 MB target)

* Meshes: globe ≤ 500 tris, aircraft ≤ 120 tris, one reusable cube mesh for clouds/contrail.
* Textures: exactly six × 32×32 RGBA (can be 16-bit or palettised to save more).
* No post, no outline pass, one directional light, cel-banding done in the material.
* Animations are purely procedural; no baked curves or keyframes stored.

## 9) Colour & tone (modern cel)

* Water: #2B6FEA look; Land: #3BA15A / #7C5B3A mix; Clouds: near #F2F2F2; Fuselage: #E11D2E; Wings/Tail: #B3B3B3.
* Apply cel steps to **N·L** only; keep specular off or single glossy step at grazing angles (optional, very subtle).

## 10) Looping & feel

* The globe’s slow 60-second rotation anchors the scene.
* The aircraft’s brisk 6-second orbit communicates “working/loading.”
* Clouds continuously cycle, clearly **orbiting** rather than popping in place, with tasteful vapourisation fades.
* From any randomised seed, composition remains clean, readable, and logo-like.

That’s the full, engine-agnostic scene description with concrete coordinates, pivots, and motion profiles—cel-shaded (no borders), voxel/low-poly look, one red low-poly aircraft orbiting a stylised Earth, with cloud groups that appear, drift, and dissolve as they **orbit** the globe.

---

## 11) Formal Declarative Schema (Extraction-Oriented)

The following sections introduce a machine-extraction friendly schema that formalises the concepts implicitly described above and aligns with current engine naming trends. All identifiers follow `PascalCase` for type-like categories (e.g. `SceneConfig`, `MeshRecipeAsset`), `snake_case` for parameter keys inside procedural recipes, and `SCREAMING_SNAKE_CASE` only for enum literals (if materialised later). Asset IDs in XML remain `CamelCase` (as presently used) and generated internal `AssetId` values will be stable hashes.

### 11.1 Schema Segments Overview

| Segment | Purpose | Extract Root Key | Notes |
|---------|---------|------------------|-------|
| Assets Catalogue | Defines atomic or procedural resources | `assets` | Matches `<assets>` block in package.xml |
| Scene Configuration | Procedural world bootstrap description | `scene_configs` | Each item keyed by `id` |
| Input Configuration | Logical action → device bindings | `input_configs` | Source for InputSystem mapping |
| Overlay/UI Configuration | Heads-up and debug overlays | `overlay_configs` | Consumed by VisualizationSystem |
| Component Configuration | Global / template component param sets | `component_configs` | Merged/applied at world bootstrap |
| Environment Physics | Atmosphere & gravity & wind models | embedded in scene config | Normalised under `env_physics` |

> Extraction Hint: Each top-level section below is preceded by `SCHEMA:` marker and a fenced `yaml` block for tooling.

### 11.2 Canonical Type Map

SCHEMA: type_map
```yaml
version: 1
namespace: dev_package
types:
  asset.font: { kind: leaf, required_fields: [path], optional_fields: [properties.size, properties.antialiasing] }
  asset.texture: { kind: leaf, required_fields: [path], optional_fields: [properties.format, properties.mipmaps, properties.filter] }
  asset.material: { kind: composite, required_fields: [shader_id], optional_fields: [params] }
  asset.mesh_recipe: { kind: procedural, required_fields: [generator], optional_fields: [params] }
  config.scene: { kind: scene_config, required_fields: [id, type], optional_fields: [entities, env_physics] }
  config.input: { kind: input_config, required_fields: [id, key_bindings] }
  config.overlay: { kind: overlay_config, required_fields: [id, ui_elements] }
  config.component: { kind: component_config, required_fields: [id, component] }
models:
  env_physics:
    gravity: { vector3: true, default: [0.0, -9.81, 0.0] }
    air_density_model:
      type: { enum: [exponential] }
      rho_0: { float: true, min: 0.5, max: 2.0, default: 1.225 }
      scale_height: { float: true, min: 1000.0, max: 12000.0, default: 8500.0 }
    wind_model:
      type: { enum: [constant] }
      velocity: { vector3: true, default: [5.0, 0.0, 0.0] }
```

### 11.3 Assets Schema (Normalised)

SCHEMA: assets
```yaml
assets:
  - id: ConsoleFont
    type: font
    path: console/console_font.ttf
    properties:
      size: { value: 16, constraints: { min: 6, max: 72 } }
      antialiasing: { value: true }
  - id: ConsoleBackgroundTexture
    type: texture
    path: console/console_background.png
    properties:
      format: PNG
      mipmaps: false
      filter: linear
  - id: EarthSurfaceMaterial
    type: material
    shader_id: StandardPBRShader
    params:
      albedo_texture: textures/earth_albedo.ktx2
      normal_map: textures/earth_normal.ktx2
      roughness: { value: 0.8, constraints: { min: 0.0, max: 1.0 } }
      metallic: { value: 0.0, constraints: { min: 0.0, max: 1.0 } }
  - id: AtmosphereLayer1Material
    type: material
    shader_id: AtmosphereShader
    params:
      color: { r: 0.2, g: 0.4, b: 0.7, a: 0.15 }
      blend_mode: AlphaBlend
  - id: AtmosphereLayer2Material
    type: material
    shader_id: AtmosphereShader
    params:
      color: { r: 0.3, g: 0.5, b: 0.8, a: 0.05 }
      blend_mode: AlphaBlend
  - id: CloudLayerMaterial
    type: material
    shader_id: CloudVolumeShader
    params:
      color: { r: 1.0, g: 1.0, b: 1.0, a: 0.7 }
      texture_id: textures/perlin_noise_cloud.ktx2
      scroll_speed: { u: 0.01, v: 0.005 }
  - id: SphereRecipe
    type: mesh_recipe
    generator: ProceduralSphereGenerator
    params:
      radius_param: { type: float, default: 1.0, min: 0.1 }
      segments_param: { type: int, default: 32, min: 4, max: 256 }
      invert_normals_param: { type: bool, default: false }
  - id: VoxelCloudRecipe
    type: mesh_recipe
    generator: ProceduralVoxelCloudGenerator
    params:
      base_radius_param: { type: float, default: 1.0 }
      height_range_param: { type: float, default: 0.1 }
      noise_scale_param: { type: float, default: 0.01 }
      density_threshold_param: { type: float, default: 0.5 }
```

### 11.4 Scene Configuration (Expanded Normal Form)

SCHEMA: scene_config.default_sphere_world
```yaml
id: DefaultSphereWorldScene
scene_type: procedural_earth_like
entities:
  - name: Earth
    id: EarthEntityId
    components:
      - type: TransformC
        position: { x: 0.0, y: -6371000.0, z: 0.0 }
        orientation: { x: 0.0, y: 0.0, z: 0.0, w: 1.0 }
      - type: RenderableC
        mesh_recipe_ref:
          id: SphereRecipe
          overrides:
            radius_param: 6371000.0
            segments_param: 64
            invert_normals_param: false
        material_ref: EarthSurfaceMaterial
  - name: AtmosphereLayer1
    id: AtmosphereLayer1EntityId
    components:
      - type: TransformC
        position: { x: 0.0, y: -6371000.0, z: 0.0 }
        orientation: { x: 0.0, y: 0.0, z: 0.0, w: 1.0 }
      - type: RenderableC
        mesh_recipe_ref:
          id: SphereRecipe
          overrides:
            radius_param: "6371000.0 + 10000.0" # Expression; TODO: evaluator or pre-resolution
            segments_param: 32
            invert_normals_param: true
        material_ref: AtmosphereLayer1Material
  - name: AtmosphereLayer2
    id: AtmosphereLayer2EntityId
    components:
      - type: TransformC
        position: { x: 0.0, y: -6371000.0, z: 0.0 }
        orientation: { x: 0.0, y: 0.0, z: 0.0, w: 1.0 }
      - type: RenderableC
        mesh_recipe_ref:
          id: SphereRecipe
          overrides:
            radius_param: "6371000.0 + 20000.0"
            segments_param: 32
            invert_normals_param: true
        material_ref: AtmosphereLayer2Material
  - name: VoxelClouds
    id: VoxelCloudsEntityId
    components:
      - type: TransformC
        position: { x: 0.0, y: -6371000.0, z: 0.0 }
        orientation: { x: 0.0, y: 0.0, z: 0.0, w: 1.0 }
      - type: RenderableC
        mesh_recipe_ref:
          id: VoxelCloudRecipe
          overrides:
            base_radius_param: "6371000.0 + 5000.0"
            height_range_param: 5000.0
            noise_scale_param: 0.0001
            density_threshold_param: 0.55
        material_ref: CloudLayerMaterial
env_physics:
  gravity: { x: 0.0, y: -9.81, z: 0.0 }
  air_density_model:
    type: exponential
    rho_0: 1.225
    scale_height: 8500.0
  wind_model:
    type: constant
    velocity: { x: 5.0, y: 0.0, z: 0.0 }
```

### 11.5 Input Configuration

SCHEMA: input_config.global_developer
```yaml
id: GlobalDeveloperInput
key_bindings:
  - action: ToggleDebugConsole
    key_code: TILDE
    device: Keyboard
```

### 11.6 Overlay Configuration

SCHEMA: overlay_config.developer_overlay
```yaml
id: DeveloperOverlay
ui_elements:
  - type: DebugConsole
    visible_by_default: false
    font_asset_ref: ConsoleFont
    background_texture_asset_ref: ConsoleBackgroundTexture
    dimensions: { width_percent: 80, height_percent: 40 }
    position: { x_percent: 10, y_percent: 5 }
    color:
      background: 0x000000A0
      text: 0xFFFFFFFF
      cursor: 0xFF00FF
  - type: TextMessageOverlay
    id: NoPackagesFoundDisplay
    visible_by_default: false
    text_content: "No packages found. Displaying default sphere world."
    font_asset_ref: ConsoleFont
    color:
      text: 0xFFFFAA00
      background: 0x00000080
    position: { x_percent: 50, y_percent: 95, alignment: Center }
```

### 11.7 Component Configuration

SCHEMA: component_config.global_debug_component
```yaml
id: GlobalDebugComponent
component:
  type: DebugC
  params:
    show_physics_wireframe: false
    show_wind_vectors: false
```

### 11.8 Validation Rules (Summary)

SCHEMA: validation_rules
```yaml
asset_id:
  pattern: "^[A-Z][A-Za-z0-9_]*$"
  uniqueness: package
material_param_ranges:
  roughness: { min: 0.0, max: 1.0 }
  metallic: { min: 0.0, max: 1.0 }
mesh_recipe_constraints:
  SphereRecipe.segments_param: { min: 4, max: 512 }
  VoxelCloudRecipe.density_threshold_param: { min: 0.0, max: 1.0 }
vector_components:
  gravity: 3
  wind_velocity: 3
scene_requirements:
  DefaultSphereWorldScene:
    must_have_entities: [Earth, AtmosphereLayer1, AtmosphereLayer2]
    unique_components_per_entity: true
```

### 11.9 Versioning & Forward Evolution

SCHEMA: versioning
```yaml
schema_version: 1
compatibility:
  min_loader_version: 0.1.0
  notes:
    - Future addition: multi-band wind models (enum extension of wind_model.type)
    - Future addition: atmospheric scattering profile asset type
    - Future addition: expression pre-pass to resolve arithmetic strings (e.g. "6371000.0 + 10000.0")
    - Deprecation window: keep numeric string expressions until version 3
```

### 11.10 Extraction Directives (Tooling Hints)

SCHEMA: extraction_hints
```yaml
fenced_block_tag: SCHEMA
format: yaml
block_name_pattern: "^[a-z0-9_.-]+$"
root_aggregation_order:
  - type_map
  - assets
  - scene_config.default_sphere_world
  - input_config.global_developer
  - overlay_config.developer_overlay
  - component_config.global_debug_component
  - validation_rules
  - versioning
  - extraction_hints
post_process:
  - resolve_expressions: true
  - generate_asset_ids: hash64(asset.id)
  - link_scene_env: merge(env_physics, type_map.models.env_physics.defaults)
```

---

## 12) Implementation Notes Mapping (Engine ↔ Spec)

| Spec Concept | Engine System | Data Source (XML/YAML) | Notes |
|--------------|---------------|------------------------|-------|
| Globe Spin | (Future) VisualizationSystem | scene_config.entities[Earth] | Procedural rotation, not baked |
| Aircraft Orbit | (Future) VehicleControlSystem / custom orbit module | scene_config + procedural runtime | Elliptical param derivable from future component |
| Cloud Groups | WorldGenSystem + future CloudSystem | scene_config (VoxelClouds overrides) | Lifecycle params not yet codified in XML |
| UI Console | ConsoleSystem + VisualizationSystem | overlay_config | Event driven via ConsoleToggleEvent |
| Debug Message | VisualizationSystem | overlay_config (TextMessageOverlay) | Visibility toggled on NoPackagesFoundEvent |

The above tables & SCHEMA blocks are intentionally structured for deterministic scraping by a build-step tool.
